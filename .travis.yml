branches:
  only:
  - master
language: python
python:
- '3.4'
before_script:
- if [ -n "${GH_TOKEN}" ] && [ "${TRAVIS_BRANCH}" == "master" ] && [ "${TRAVIS_PULL_REQUEST}" == "false" ]; then
    pip install pygithub;
    pip install pygithub3;
  fi
script:
- python3 tools/sqf_validator.py
- python3 tools/config_style_checker.py
- if [ -n "${GH_TOKEN}" ] && [ "${TRAVIS_BRANCH}" == "master" ] && [ "${TRAVIS_PULL_REQUEST}" == "false" ]; then
    python3 tools/deploy.py;
  fi
env:
  global:
  - secure: vO3XP/T4U8t2rpnCKY5tXHFLt1k8Y90adZaoNULv/pW9+HgNYrSvA/N3oUH+FRhuEiIIAWQYJwm8y5Dvb1Ei7OvcRn7UireMQjQqN71ut4c6QZe1LkL1JAHMK2BEpl3YjZTbNjfQiMiKEmgrLaLh5n9YKHi9ridffeiFkzIJup31Ld0A1Pbg7OWo2KxyaVhJTGIDgAQTpLQZ8fJe260mkVlp+Z6Yom2Nq2j9PN49JTczOB2g49zY2FcUjP0YHMBri54C5cZ5YMdyphgRZ19fJrt1wPqh5J162ma03Bi4SBFdk2rnOOoGcPEP2YGCcqOc4v0k1ufsxWQPia261D0dCkBYkYHm6s7GBBZWF3dN0+Dds9LDmiZz0qymRmWmUEn+mQ5URotTzUvELaOEx22cutzui2TD7DBKQu2vezW3qYg8b//acewjxrg5qaGcMTjuwszZVptPhG6zmPw9QVYqQyskoYU3M2CqfQ/I8KNQxUhxhWcLPpX6Pkxd8GimRxiwc5YxNYdgVxZNVwsX2FO7k+68/fizVdfes22XD1yom+U3gkkPH2zY5f0hGv5GKWNIcBQjlf8MGm8RPSZLP+yWZDQD9Rne3lhZOyMGdMr/hu0A01ZR2Vq2MtoB9y52gO3rG0GtYyERg4wU/IF5A2xNetgH7j2cqfoZURr2W0HKZes=
notifications:
  slack:
    secure: eH27KHy2bmV//YnDOEcuQDpMviDZTBO3flwfBQGZHGkx1t2yzYcY/OJQEXvn7YNgL3cRFO35o5vQACGzf3nEGBaxPlxlT54jdhBicqK3pCHkef+mGcY2DDXhZKymXnHHW4P9jtnJ2/YijLpRF7WbHDgAQy+Yy9KiPrWDSZQlxLmz1xz6/0jffKghrMO+KYeaaZBmbvzq1l27Tuw/WjDXDrfMMpxlj19NZjoepLeovC8HIfoipquDLyfrJAhmC9oEHNft+Xv4RP2jcekWkIUka5petTShL3oDWcs4guwcUepsZqxhOdcBYa6Ng0MjgmCHilbOzJVtDVxzQx2i1Xq/iOxJoHx5VX7EnGhvsbpAiCf2DoR4Z3UH4eOr2kSkD8CHe6IwgVwgA74k5KurdSP/ZPsEoM1rh//QDT4nWD3g2qUq/xUT+sYTfj5K+BQAgDluaTmhip+KmupF3qKns7s4cskSx88ABXv+8Wm7HA3G55u81/QmboibvIhBpnHf0gR+iWdGqNZhIjBnt45E8run6Qs8niQ7RDgtks3I8i3kUTh1H0tb4S1H/seYuXQHzJGzMXfKugS2zLYxm5Wbl5ntFbC5CkWsEwN7xosGdANVYasmRofIhbfk3HaVbR9b8lPxg0+9oxxcYlm8irxUZV+lai3YGfAQkSn0njnImckNUFA=
    on_success: change
  email:
    on_success: never
    on_failure: never
